(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[4],{253:function(e,t,s){e.exports={commonWrap:"Dialogs_commonWrap__2vYTk",dialogsWrap:"Dialogs_dialogsWrap__BSdra",dialogs:"Dialogs_dialogs__1I3Ut",dialog:"Dialogs_dialog__2ahLy",active:"Dialogs_active__3xG4Q",dialog__img:"Dialogs_dialog__img__x1-Fj",messagesWrap:"Dialogs_messagesWrap__2VqBb",writeMsg:"Dialogs_writeMsg__KqPRz",writeMsgText:"Dialogs_writeMsgText__2eYY2",writeMsgBtn:"Dialogs_writeMsgBtn__sFsG3",messages:"Dialogs_messages__3rDHn",fullHeightMessages:"Dialogs_fullHeightMessages__1STKv",outgoing:"Dialogs_outgoing__1p9tq",incoming:"Dialogs_incoming__VBKpg",noDlg:"Dialogs_noDlg__25ZAv"}},256:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s.n(n),i=s(57),c=s(253),r=s.n(c),o=s(17),u=s(8),l=s(76),g=s(1),d=function(e){var t=e.dialogsPage,s=e.currentDialog,i=a.a.useRef(),c=a.a.createRef(),d=a.a.useRef(),m=!1,j=function(){var t=d.current.value;e.sendMsg(t),d.current.value="",d.current.focus()},f=function(e){"Enter"!=e.code||!c.current||c.current.disabled||m||document.activeElement!=d.current||(e.preventDefault(),m=!0,setTimeout((function(){j()}),60))},b=function(e){"Enter"==e.code&&c.current&&!c.current.disabled&&m&&document.activeElement==d.current&&(m=!1)};Object(n.useEffect)((function(){document.addEventListener("keydown",f)})),Object(n.useEffect)((function(){document.addEventListener("keyup",b)})),Object(n.useEffect)((function(){s&&(i.current.scrollTop=i.current.scrollHeight)}));var _=function(t){var s=t.currentTarget.textContent;e.setCurDlg(s)},h=function(e){var t="/dialogs/".concat(e.id);return Object(g.jsx)("li",{className:r.a.dialog,children:Object(g.jsxs)(o.b,{to:t,activeClassName:r.a.active,onClick:_,children:[Object(g.jsx)("img",{src:e.ava,className:r.a.dialog__img}),e.name]})})},p=t.map((function(e,t){return Object(g.jsx)(h,{name:e.name,id:e.id,ava:e.ava},e.id)})),x=function(e){var t=e.style?r.a.outgoing:r.a.incoming;return Object(g.jsx)("div",{className:t,children:e.msgs})},v=s?t.filter((function(e){return e.name==s}))[0].msgs.map((function(e){return Object(g.jsx)(x,{msgs:e.text,style:e.out},e.id)})):null,O=function(){return Object(g.jsx)("div",{className:r.a.messages,ref:i,children:v})},D=function(){return Object(g.jsx)("div",{className:r.a.fullHeightMessages,children:Object(g.jsx)("div",{className:r.a.noDlg,children:Object(g.jsx)("p",{children:"\u0414\u0438\u0430\u043b\u043e\u0433 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d"})})})},T=function(e){var t="/dialogs/".concat(e.path);return Object(g.jsx)(u.Route,{path:t,render:function(){return e.component}})},M=s?t.map((function(e){return Object(g.jsx)(T,{path:e.id,component:Object(g.jsx)(O,{})},e.id)})):Object(g.jsx)(D,{}),N=function(e){return Object(g.jsx)(l.a,{initialValues:{msgText:""},children:function(e){var t=e.values,s=(e.errors,e.touched,e.handleChange),n=e.handleBlur,a=(e.handleSubmit,e.isSubmitting);return Object(g.jsxs)("form",{className:r.a.writeMsg,children:[Object(g.jsx)("textarea",{name:"msgText",id:"msgText",placeholder:"write message text",onChange:s,onBlur:n,value:t.msgText.startsWith("\n")?"":t.msgText,className:r.a.writeMsgText,ref:d,autoFocus:!0}),Object(g.jsx)("button",{type:"submit",className:r.a.writeMsgBtn,ref:c,disabled:a||""==t.msgText||!t.msgText.match(/\S/g),onClick:j,children:"Send"})]})}})};return Object(g.jsxs)("div",{className:r.a.commonWrap,children:[Object(g.jsx)("div",{className:r.a.dialogsWrap,children:Object(g.jsx)("ul",{className:r.a.dialogs,children:p})}),Object(g.jsxs)("div",{className:r.a.messagesWrap,children:[M,s&&Object(g.jsx)(N,{})]})]})},m=s(25),j=s(2),f=s(3),b=s(4),_=s(9),h=s(10),p=function(e){return{isAuth:e.auth.isAuth}},x=s(26);t.default=Object(x.d)(Object(m.b)((function(e){return{dialogsPage:e.dialogsPage.dialogs,currentDialog:e.dialogsPage.currentDialog}}),(function(e){return{sendMsg:function(t){e(Object(i.c)(t))},setCurDlg:function(t){e(Object(i.d)(t))}}})),(function(e){var t=function(t){Object(_.a)(n,t);var s=Object(h.a)(n);function n(){return Object(f.a)(this,n),s.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return this.props.isAuth?Object(g.jsx)(e,Object(j.a)({},this.props)):Object(g.jsx)(u.Redirect,{to:"/login"})}}]),n}(a.a.Component);return Object(m.b)(p)(t)}))(d)}}]);
//# sourceMappingURL=4.2a44f92a.chunk.js.map